[[custom-states]]
= Custom Salt States

You can create your own custom Salt states with {productname}.
Custom states are stored as Salt state (SLS) files on the {productname} Server, in the [path]``/srv/susemanager/salt/`` directory.



== Example Custom State

////

From https://github.com/ceph/ceph-salt/blob/master/ceph-salt-formula/salt/ceph-salt/update/update.sls

----
install required packages:
  pkg.installed:
    - pkgs:
      - lsof
    - failhard: True
update packages:
  module.run:
    - name: pkg.upgrade
    - failhard: True
check if reboot is needed:
  ceph_salt.set_reboot_needed:
    - failhard: True
reboot:
   ceph_salt.reboot_if_needed:
     - failhard: True
----
////



== Custom State to Trust a GPGÂ Key

////
From https://github.com/SUSE/spacewalk/issues/13812#issuecomment-769211978

Get the GPG key from whatever place has it (depends on the distribution)
And then:

Upload the key to the server to /srv/www/htdocs/pub
Create a salt state via webui to get the key from the SUSE manager server and trust it at the client
An example can be offered.
Or:

Handle it on your own git repository that you configured to be used at SUSE Manager via gitfs (as we do), by adding the key and the salt state there.
I'd not offer an example. Just mention this posibility.
////
